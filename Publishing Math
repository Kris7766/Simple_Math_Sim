#include <iostream>
#include <ros/ros.h>
#include <std_msgs/String.h>
#include <std_msgs/Int8.h>
#include <std_msgs/Char.h>

//Publisher.
ros::Publisher pub_Regnestykke_v1;
ros::Publisher pub_Regnestykke_v2;
ros::Publisher pub_Regnestykke_op1;
ros::Publisher pub_Resultat;

//Variabler.
int v1, v2, mat, a = 1, opera;
char op1;

//8bit integer msg navne.
std_msgs::Int8 msg_v1, msg_v2, msg_res;
std_msgs::Char msg_op1;

//main function.
int main(int argc, char **argv)
{
    ros::init (argc, argv, "Math");
    ros::NodeHandle n;
    pub_Regnestykke_v1 = n.advertise<std_msgs::Int8>("Regnestykke_v1", 1);
    pub_Regnestykke_v2 = n.advertise<std_msgs::Int8>("Regnestykke_v2", 1);
    pub_Regnestykke_op1 = n.advertise<std_msgs::Char>("Regnestykke_op1", 1);
    pub_Resultat = n.advertise<std_msgs::Int8>("Resultat", 1);

    while (a != 0 && ros::ok())
    {
        std::cout << "Indtast første værdi her: ";
        std::cin >> v1;
        std::cout << "\nVælg operation; 1 = +   2 = -   3 = *   4 = / ";
        std::cin >> opera;
        std::cout << "\nIndtast anden værdi her: ";
        std::cin >> v2;

        if (opera == 1)
        {
            std::cout << v1 << " + " << v2 << " = ";
            mat = v1 + v2;
            std::cout << mat << std::endl;
            op1 = '+';
        }

        else if (opera == 2)
        {
            std::cout << v1 << " - " << v2 << " = ";
            mat = v1 - v2;
            std::cout << mat << std::endl;
            op1 = '-';
        }

        else if (opera == 3)
        {
            std::cout << v1 << " * " << v2 << " = ";
            mat = v1 * v2;
            std::cout << mat << std::endl;
            op1 = '*';
        }

        else if (opera == 4)
        {
            std::cout << v1 << " / " << v2 << " = ";
            mat = v1 / v2;
            std::cout << mat << std::endl;
            op1 = '/';
        }


        msg_v1.data = v1;
        ROS_INFO("%i", msg_v1.data);
        pub_Regnestykke_v1.publish(msg_v1);

        msg_op1.data = op1;
        ROS_INFO("%i", msg_op1.data);
        pub_Regnestykke_op1.publish(msg_op1);
        
        msg_v2.data = v2;
        ROS_INFO("%i", msg_v2.data);
        pub_Regnestykke_v2.publish(msg_v2);
        
        msg_res.data = mat;
        ROS_INFO("%i", msg_res.data);
        pub_Resultat.publish(msg_res);

        ros::spinOnce();

        std::cout << "Tast 0 for at afslutte alt andet for at fortsætte: \n";
        std::cin >> a;
    }

    return 0;
}
